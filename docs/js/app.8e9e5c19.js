(function(){"use strict";var e={9868:function(e,a,n){var t=n(5130),o=(n(4114),n(6768)),r=n(144),u=n(4232);const l=new Headers;function i(e){l.set("X-API-KEY",e)}async function s(){const e=await fetch("https://opendata.resas-portal.go.jp/api/v1/prefectures",{headers:l}),a=await e.json();if(null!=a.message)throw console.error(a.message),new Error;return a.result}async function c(e){const a=await fetch("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode="+String(e),{headers:l}),n=await a.json();if(null!=n.message)throw console.error(n.message),new Error;return n.result}l.set("Accept","application/json"),l.set("Content-Type","application/json;charset=utf-8");const p={class:"box_display"},d=["value"];var f=(0,o.pM)({__name:"input_todouhuken",emits:["todouhuken_checked","todouhuken_dechecked","api_error"],setup(e,{emit:a}){const n=a,l=(0,r.KR)([]),i=(0,r.KR)([]),c=(0,r.KR)([]);function f(){const e=i.value.filter((e=>-1===c.value.indexOf(e)));if(e.length>0)n("todouhuken_checked",{prefCode:e[0],prefName:l.value[e[0]-1].prefName});else{const e=c.value.filter((e=>-1===i.value.indexOf(e)));n("todouhuken_dechecked",{prefCode:e[0],prefName:l.value[e[0]-1].prefName})}c.value=i.value}return s().then((e=>l.value=e)).catch((()=>n("api_error"))),(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[a[1]||(a[1]=(0,o.Lk)("h2",null,"都道府県を選択",-1)),(0,o.Lk)("div",p,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.value,((e,n)=>((0,o.uX)(),(0,o.CE)("label",{key:n},[(0,o.eW)((0,u.v_)(e.prefName),1),(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:e.prefCode,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),onChange:f},null,40,d),[[t.lH,i.value]])])))),128))])],64))}}),v=n(1241);const h=(0,v.A)(f,[["__scopeId","data-v-0c9046fb"]]);var b=h;const _={class:"box_display"};var k=(0,o.pM)({__name:"input_mode",emits:["mode_changed"],setup(e,{emit:a}){const n=(0,r.KR)(0),u=a;function l(){u("mode_changed",n.value)}return(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[a[8]||(a[8]=(0,o.Lk)("h2",null,"モードを選択",-1)),(0,o.Lk)("form",_,[(0,o.Lk)("label",null,[a[4]||(a[4]=(0,o.eW)("総人口")),(0,o.bo)((0,o.Lk)("input",{type:"radio",name:"mode",value:"0","onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),onChange:l,checked:""},null,544),[[t.XL,n.value]])]),(0,o.Lk)("label",null,[a[5]||(a[5]=(0,o.eW)("年少人口")),(0,o.bo)((0,o.Lk)("input",{type:"radio",name:"mode",value:"1","onUpdate:modelValue":a[1]||(a[1]=e=>n.value=e),onChange:l},null,544),[[t.XL,n.value]])]),(0,o.Lk)("label",null,[a[6]||(a[6]=(0,o.eW)("生産年齢人口")),(0,o.bo)((0,o.Lk)("input",{type:"radio",name:"mode",value:"2","onUpdate:modelValue":a[2]||(a[2]=e=>n.value=e),onChange:l},null,544),[[t.XL,n.value]])]),(0,o.Lk)("label",null,[a[7]||(a[7]=(0,o.eW)("老年人口")),(0,o.bo)((0,o.Lk)("input",{type:"radio",name:"mode",value:"3","onUpdate:modelValue":a[3]||(a[3]=e=>n.value=e),onChange:l},null,544),[[t.XL,n.value]])])])],64))}});const m=(0,v.A)(k,[["__scopeId","data-v-3ce0f09c"]]);var g=m,y=n(6912),L=n(1010);const w={class:"fadein_case"};var C=(0,o.pM)({__name:"view_graph",props:{data_sets:{}},setup(e){y.t1.register(y.PP,y.kc,y.E8,y.FN,y.pr,y.No,y.dN,y.hE,y.m_,y.s$);const a=e,n=window.innerWidth,t={labels:Array.from({length:14},((e,a)=>1980+5*a)),datasets:a.data_sets},u={responsive:!0};return(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[a[0]||(a[0]=(0,o.Lk)("h2",null,"グラフ表示",-1)),(0,o.Lk)("div",w,[(0,r.R1)(n)>480?((0,o.uX)(),(0,o.Wv)((0,r.R1)(L.N1),{key:0,data:t,options:u})):((0,o.uX)(),(0,o.Wv)((0,r.R1)(L.N1),{key:1,data:t,options:u,height:"500"}))])],64))}});const E=(0,v.A)(C,[["__scopeId","data-v-c21d2ada"]]);var X=E,A=(0,o.pM)({__name:"api_key_listener",emits:["api_key_get"],setup(e,{emit:a}){const n=(0,r.KR)(""),u=a;return(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[a[4]||(a[4]=(0,o.Lk)("h2",null,"API-key入力",-1)),(0,o.Lk)("form",{class:"box_display",onSubmit:a[1]||(a[1]=(0,t.D$)((e=>u("api_key_get",n.value)),["prevent"]))},[a[2]||(a[2]=(0,o.Lk)("label",null,"APIキーを入力してください：",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e)},null,512),[[t.Jo,n.value]]),a[3]||(a[3]=(0,o.Lk)("input",{type:"submit"},null,-1))],32)],64))}});const K=(0,v.A)(A,[["__scopeId","data-v-77062e96"]]);var N=K;const O={key:1};var j=(0,o.pM)({__name:"App",setup(e){const a=(0,r.KR)(!1),n=(0,r.KR)(0);let t=0,u=[],l=[];async function s(e){await c(e.prefCode).then((a=>{u.push({label:e.prefName,data:a})})).catch((e=>console.error("Error :",e)))}function p(){l=[];let e=0;u.forEach((a=>{l.push({label:a.label,borderColor:["rgba(255,0,255,0.8)","rgba(0,255,255,0.8)","rgba(255,255,0,0.8)","rgba(255,0,255,0.5)","rgba(0,255,255,0.5)","rgba(255,255,0,0.5)","rgba(255,0,255,0.2)","rgba(0,255,255,0.2)","rgba(255,255,0,0.2)"][e%9],data:a.data.data[t].data.slice(0,9).map((e=>e.value)),borderDash:[]}),l.push({label:a.label+" 予測値",borderColor:["rgba(255,0,255,0.8)","rgba(0,255,255,0.8)","rgba(255,255,0,0.8)","rgba(255,0,255,0.5)","rgba(0,255,255,0.5)","rgba(255,255,0,0.5)","rgba(255,0,255,0.2)","rgba(0,255,255,0.2)","rgba(255,255,0,0.2)"][e%9],data:Array.from({length:8},(()=>NaN)).concat(a.data.data[t].data.slice(8,15).map((e=>e.value))),borderDash:[5,3]}),e++})),n.value++}async function d(e){await s(e),p()}function f(e){u.splice(u.findIndex((a=>a.label===e.prefName)),1),p()}function v(e){t=e,p()}function h(e){i(e),a.value=!0}function _(){a.value=!1,alert("APIにエラーが発生しました。APIキーが有効であることを確認してください。")}return(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[t[0]||(t[0]=(0,o.Lk)("h1",null,[(0,o.eW)(" 県別人口推移グラフ"),(0,o.Lk)("br"),(0,o.eW)(" Population transition graph ")],-1)),a.value?((0,o.uX)(),(0,o.CE)("div",O,[(0,o.bF)(b,{onTodouhuken_checked:d,onTodouhuken_dechecked:f,onApi_error:_}),(0,o.bF)(g,{onMode_changed:v}),((0,o.uX)(),(0,o.Wv)(X,{data_sets:(0,r.R1)(l),key:n.value},null,8,["data_sets"]))])):((0,o.uX)(),(0,o.Wv)(N,{key:0,onApi_key_get:h}))],64))}});const x=j;var W=x;(0,t.Ef)(W).mount("#app")}},a={};function n(t){var o=a[t];if(void 0!==o)return o.exports;var r=a[t]={exports:{}};return e[t].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(a,t,o,r){if(!t){var u=1/0;for(c=0;c<e.length;c++){t=e[c][0],o=e[c][1],r=e[c][2];for(var l=!0,i=0;i<t.length;i++)(!1&r||u>=r)&&Object.keys(n.O).every((function(e){return n.O[e](t[i])}))?t.splice(i--,1):(l=!1,r<u&&(u=r));if(l){e.splice(c--,1);var s=o();void 0!==s&&(a=s)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,o,r]}}(),function(){n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,{a:a}),a}}(),function(){n.d=function(e,a){for(var t in a)n.o(a,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};n.O.j=function(a){return 0===e[a]};var a=function(a,t){var o,r,u=t[0],l=t[1],i=t[2],s=0;if(u.some((function(a){return 0!==e[a]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(i)var c=i(n)}for(a&&a(t);s<u.length;s++)r=u[s],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},t=self["webpackChunkresas_population_graph"]=self["webpackChunkresas_population_graph"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=n.O(void 0,[504],(function(){return n(9868)}));t=n.O(t)})();
//# sourceMappingURL=app.8e9e5c19.js.map